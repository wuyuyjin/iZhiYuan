import{_ as B}from"./nuxt-link.8ce08475.js";import{z as F,r as U,G as V,e as j,f as e,w as o,D,F as E,o as $,q as r,u as a,H as g,l as u,s as h,x as z,y as A}from"./entry.23c03e9b.js";import{t as G,o as H,s as w,u as M,a as b}from"./vee-validate.esm.991ef16c.js";import{a as y,b as S}from"./api.aababa14.js";import{_ as J}from"./Card.d36d8e49.js";import{_ as K}from"./Input.18ea4f6e.js";import{_ as O,a as Q}from"./FormItem.4811c7e8.js";import{_ as W}from"./Button.8c0c91a9.js";import{_ as X}from"./Space.f9a3f419.js";import"./browser.3909655e.js";import"./Close.49903972.js";import"./format-length.c9d165c6.js";import"./get.bec29ee2.js";const Y=d=>(z("data-v-12f4ac2b"),d=d(),A(),d),Z={class:"text-sm text-red-700"},ee={class:"text-sm text-red-700"},oe={class:"text-sm text-red-700"},te={class:"text-sm text-red-700"},ae=Y(()=>u("button",{class:"bg-green-500/100 rounded-lg w-1/4 h-10 text-white"}," 注册 ",-1)),se={__name:"admitRegister",setup(d){const C=U(null),T=G(H({email:w().nonempty("This is required").email({message:"Must be a valid email"}),password:w().nonempty("This is required").min(6,{message:"Too short"}),confirmPassword:w().nonempty("This is required").min(6,{message:"Too short"}),Code:w().nonempty("This is required").min(4,{message:"请输入四位验证码"})})),{handleSubmit:L,errors:m}=M({validationSchema:T}),P=V(),{value:s}=b("email"),{value:i}=b("password"),{value:p}=b("confirmPassword"),{value:_}=b("Code");function R(){s.value,s.value===""?alert("请先输入邮箱！"):y.get(S+"/captcha?email="+s.value).then(l=>{console.log(l),alert("发送成功")}).catch(l=>{console.log(l),alert("发送失败")}),alert("email="+s.value)}const N=L(l=>{i.value===p.value?y.post(S+"/Admin/register",{email:s.value,password:i.value,Code:_.value}).then(t=>{console.log(t),alert("注册成功"),P.push({path:"/Login/login"})}).catch(t=>{console.log(t),alert("注册失败")}):alert("两次输入的密码不一样，请重新输入密码")});return(l,t)=>{const c=K,f=O,k=W,q=Q,x=X,v=B,I=J;return $(),j(E,null,[e(I,{title:"i志愿管理员注册",class:"container mx-auto box-border h-96 w-96 login rounded-lg"},{action:o(()=>[e(x,{justify:"space-between"},{default:o(()=>[e(v,{to:"/Login/login"},{default:o(()=>[r("用户登录")]),_:1}),e(v,{to:"/Login/admitLogin"},{default:o(()=>[r("管理员登录")]),_:1}),e(v,{to:"/Login/register"},{default:o(()=>[r("用户注册")]),_:1}),e(v,{to:"/Login/forgetPass"},{default:o(()=>[r("忘记密码？")]),_:1})]),_:1})]),default:o(()=>[e(x,{vertical:""},{default:o(()=>[e(q,{ref_key:"formRef",ref:C,"label-placement":"left","label-width":70,onSubmit:a(N)},{default:o(()=>[e(f,{label:"email",path:"email"},{default:o(()=>[e(c,{value:a(s),"onUpdate:value":t[0]||(t[0]=n=>g(s)?s.value=n:null),placeholder:"Email",type:"email",name:"email"},null,8,["value"])]),_:1}),u("div",Z,h(a(m).email),1),e(f,{label:"密码",path:"password"},{default:o(()=>[e(c,{value:a(i),"onUpdate:value":t[1]||(t[1]=n=>g(i)?i.value=n:null),placeholder:"password",type:"password",name:"password"},null,8,["value"])]),_:1}),u("div",ee,h(a(m).password),1),e(f,{label:"确认密码",path:"password"},{default:o(()=>[e(c,{value:a(p),"onUpdate:value":t[2]||(t[2]=n=>g(p)?p.value=n:null),placeholder:"confirmPassword",type:"password",name:"confirmPassword"},null,8,["value"])]),_:1}),u("div",oe,h(a(m).confirmPassword),1),e(f,{path:"Code",label:"验证码"},{default:o(()=>[e(c,{value:a(_),"onUpdate:value":t[3]||(t[3]=n=>g(_)?_.value=n:null),placeholder:"请输入4位验证码",type:"text",name:"Code"},null,8,["value"]),r("                 "),e(k,{type:"info",onClick:R,class:"rounded-lg"},{default:o(()=>[r("发送验证码")]),_:1})]),_:1}),u("div",te,h(a(m).Code),1),ae]),_:1},8,["onSubmit"])]),_:1})]),_:1}),D(l.$slots,"default",{},void 0,!0)],64)}}},he=F(se,[["__scopeId","data-v-12f4ac2b"]]);export{he as default};
