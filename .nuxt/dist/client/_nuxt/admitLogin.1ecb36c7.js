import{_ as B}from"./nuxt-link.86ac068c.js";import{a as F,r as V,G as j,o as C,c as U,w as o,f as t,q as p,u as s,H as f,l as _,s as g,x as z,y as D,z as E}from"./entry.8cc5d05e.js";import{t as G,o as H,s as h,u as P,a as y}from"./vee-validate.esm.e72ddff5.js";import{a as v,b as x}from"./api.5d75f8ba.js";import{u as w}from"./squareStore.4896160c.js";import{u as b}from"./type.ace41c4a.js";import{_ as $}from"./Space.b2dd83df.js";import{_ as J}from"./Input.445e887b.js";import{_ as K,a as M}from"./FormItem.54a84351.js";import{_ as O}from"./Card.27f87ae1.js";import"./browser.6edf931c.js";import"./Close.921ce76f.js";import"./format-length.c9d165c6.js";import"./get.29bc1e43.js";const S=n=>(z("data-v-2f0ed854"),n=n(),D(),n),Q={class:"text-xs text-red-700"},W={class:"text-xs text-red-700"},X=S(()=>_("br",null,null,-1)),Y=S(()=>_("button",{class:"bg-green-500/100 rounded-lg w-1/4 h-10 text-white"}," 登录 ",-1)),Z=F({__name:"admitLogin",setup(n){const L=V(null),q=G(H({email:h().nonempty("This is required").email({message:"请输入正确的邮箱格式"}),password:h().nonempty("This is required").min(6,{message:"密码至少需要6位"})})),{handleSubmit:I,errors:m}=P({validationSchema:q}),{value:l}=y("email"),{value:i}=y("password"),T=j(),k=I(N=>{const a={email:l.value,password:i.value};v.post(x+"/Admin/login",a).then(e=>{console.log(111111),sessionStorage.setItem("token",e.data.data.token),sessionStorage.setItem("type",e.data.data.type),b().type.type=e.data.data.type,console.log("type="+b().type.type),T.push({path:"/FunctionalArea/square"})}).catch(e=>{console.log(e),console.log(121212)}),v.get(x+"/Activity/search").then(e=>{console.log(1111),console.log(e),w().squareStore=e.data.data,console.log(w().squareStore)}).catch(e=>{console.log(3333),console.log(e)})});return(N,a)=>{const e=J,c=K,R=M,d=$,r=B,A=O;return C(),U(A,{title:"i志愿管理员登录",class:"container mx-auto box-border h-96 w-96 login rounded-lg"},{action:o(()=>[t(d,{justify:"space-between"},{default:o(()=>[t(r,{to:"/Login/login"},{default:o(()=>[p("用户登录")]),_:1}),t(r,{to:"/Login/register"},{default:o(()=>[p("用户注册")]),_:1}),t(r,{to:"/Login/admitRegister"},{default:o(()=>[p("管理员注册")]),_:1}),t(r,{to:"/Login/forgetPass"},{default:o(()=>[p("忘记密码？")]),_:1})]),_:1})]),default:o(()=>[t(d,{vertical:""},{default:o(()=>[t(R,{ref_key:"formRef",ref:L,"label-placement":"left","label-width":50,onSubmit:s(k)},{default:o(()=>[t(c,{label:"email",path:"email"},{default:o(()=>[t(e,{value:s(l),"onUpdate:value":a[0]||(a[0]=u=>f(l)?l.value=u:null),type:"email",placeholder:"Email",name:"email"},null,8,["value"])]),_:1}),_("div",Q,g(s(m).email),1),t(c,{label:"密码",path:"password"},{default:o(()=>[t(e,{value:s(i),"onUpdate:value":a[1]||(a[1]=u=>f(i)?i.value=u:null),placeholder:"password",type:"password",name:"password"},null,8,["value"])]),_:1}),_("div",W,g(s(m).password),1),X,Y]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}});const de=E(Z,[["__scopeId","data-v-2f0ed854"]]);export{de as default};
