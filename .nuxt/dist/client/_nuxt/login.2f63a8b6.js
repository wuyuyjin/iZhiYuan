import{_ as B}from"./nuxt-link.8ce08475.js";import{a as F,r as U,G as V,o as j,c as A,w as o,f as t,q as _,u as s,H as f,l as p,s as g,x as C,y as z,z as D}from"./entry.23c03e9b.js";import{t as E,o as G,s as h,u as H,a as v}from"./vee-validate.esm.991ef16c.js";import{a as y,b as x}from"./api.aababa14.js";import{u as w}from"./squareStore.f2ace1a1.js";import{u as P}from"./type.de0dffae.js";import{_ as $}from"./Input.18ea4f6e.js";import{_ as J,a as K}from"./FormItem.4811c7e8.js";import{_ as M}from"./Space.f9a3f419.js";import{_ as O}from"./Card.d36d8e49.js";import"./browser.3909655e.js";import"./Close.49903972.js";import"./format-length.c9d165c6.js";import"./get.bec29ee2.js";const b=n=>(C("data-v-9ad034f2"),n=n(),z(),n),Q={class:"text-xs text-red-700"},W={class:"text-xs text-red-700"},X=b(()=>p("br",null,null,-1)),Y=b(()=>p("button",{class:"bg-green-500/100 rounded-lg w-1/4 h-10 text-white"}," 登录 ",-1)),Z=F({__name:"login",setup(n){const S=U(null),q=E(G({email:h().nonempty("This is required").email({message:"请输入正确的邮箱格式"}),password:h().nonempty("This is required").min(6,{message:"密码至少需要6位"})})),{handleSubmit:I,errors:c}=H({validationSchema:q}),{value:l}=v("email"),{value:r}=v("password"),L=V(),T=I(k=>{const a={email:l.value,password:r.value};y.post(x+"/User/login",a).then(e=>{console.log(111111),sessionStorage.setItem("token",e.data.data.token),sessionStorage.setItem("type",e.data.data.type),P().type.type=e.data.data.type,L.push({path:"/FunctionalArea/square"})}).catch(e=>{console.log(e),console.log(121212)}),y.get(x+"/Activity/search").then(e=>{console.log(1111),console.log(e),w().squareStore=e.data.data,console.log(w().squareStore)}).catch(e=>{console.log(3333),console.log(e)})});return(k,a)=>{const e=$,m=J,N=K,d=M,i=B,R=O;return j(),A(R,{title:"i志愿用户登录",class:"container mx-auto box-border h-96 w-96 login rounded-lg"},{action:o(()=>[t(d,{justify:"space-between"},{default:o(()=>[t(i,{to:"/Login/register"},{default:o(()=>[_("用户注册")]),_:1}),t(i,{to:"/Login/admitRegister"},{default:o(()=>[_("管理员注册")]),_:1}),t(i,{to:"/Login/admitLogin"},{default:o(()=>[_("管理员登录")]),_:1}),t(i,{to:"/Login/forgetPass"},{default:o(()=>[_("忘记密码？")]),_:1})]),_:1})]),default:o(()=>[t(d,{vertical:""},{default:o(()=>[t(N,{ref_key:"formRef",ref:S,"label-placement":"left","label-width":50,onSubmit:s(T)},{default:o(()=>[t(m,{label:"email",path:"email"},{default:o(()=>[t(e,{value:s(l),"onUpdate:value":a[0]||(a[0]=u=>f(l)?l.value=u:null),type:"email",placeholder:"Email",name:"email"},null,8,["value"])]),_:1}),p("div",Q,g(s(c).email),1),t(m,{label:"密码",path:"password"},{default:o(()=>[t(e,{value:s(r),"onUpdate:value":a[1]||(a[1]=u=>f(r)?r.value=u:null),placeholder:"password",type:"password",name:"password"},null,8,["value"])]),_:1}),p("div",W,g(s(c).password),1),X,Y]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}});const de=D(Z,[["__scopeId","data-v-9ad034f2"]]);export{de as default};
