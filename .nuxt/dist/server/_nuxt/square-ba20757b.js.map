{"version":3,"file":"square-ba20757b.js","sources":["../../../../pages/FunctionalArea/square.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mx-auto w-3/4 mt-5\">\r\n      <NavigationBar/>\r\n      <n-list v-for=\"(action, index) in useSearchStore().searchStore\" :key='index'>\r\n        <n-card title=\"志愿活动\" hoverable class=\"mt-3 bg-slate-100 rounded-lg\" title-placement=\"left\">\r\n          <n-list-item>\r\n            <template #prefix>\r\n<!--              <img src=\"../../assets/pictures/images.jpg\" class=\"space-x-1\" alt=\"啥也没有\">-->\r\n              <img :src='picture+action.name' class=\"space-x-1 h-28 w-28\" alt=\"啥也没有\">\r\n            </template>\r\n            <template #suffix class=\"mt-9\">\r\n              <!--              参加活动-->\r\n              <div @click=\"join({index : index})\" v-show=\"useType().type.type === 'user'\">\r\n                <n-message-provider >\r\n                  <JoinEvent/>\r\n                </n-message-provider>\r\n              </div>\r\n              <!--              修改活动-->\r\n              <!--              <n-message-provider>-->\r\n              <!--                <AlterEvent/>-->\r\n              <!--              </n-message-provider>-->\r\n\r\n              <!--              因为组件之间数据没有传成功，所以先放这-->\r\n              <!--              删除活动-->\r\n              <!--              <n-message-provider>-->\r\n              <!--                <DeleteEvent/>-->\r\n              <!--              </n-message-provider>-->\r\n\r\n              <div v-show=\"useType().type.type === 'admit'\">\r\n                <n-button @click=\"remove({index : index})\" type=\"error\" class=\"mt-4\">\r\n                  删除活动\r\n                </n-button>\r\n              </div>\r\n\r\n              <div v-show=\"useType().type.type === 'user'\">\r\n                <div @click=\"sigIn(index)\">\r\n                <n-message-provider>\r\n                  <SignIn />\r\n                </n-message-provider>\r\n                </div>\r\n                <div @click=\"signOut(index)\">\r\n                <n-message-provider>\r\n                  <SignOut />\r\n                </n-message-provider>\r\n                </div>\r\n              </div>\r\n            </template>\r\n\r\n\r\n            <n-thing title=\"活动名称\">\r\n              {{ action.name }} <br>\r\n              活动时长：{{ action.time }}<br>\r\n              活动开始时间：{{ new Date(action.beginTime).toLocaleString() }} <br>\r\n              活动结束时间：{{ new Date(action.lateTime).toLocaleString() }} <br>\r\n              活动地点：{{ action.location }} <br>\r\n              最多{{ action.maxpeople }}个人 <br>\r\n              <!--              {{ useSquareStore().squareStore }}-->\r\n            </n-thing>\r\n          </n-list-item>\r\n        </n-card>\r\n      </n-list>\r\n\r\n      <!--      添加活动-->\r\n      <div v-if=\"useType().type.type === 'admit'\">\r\n      <n-message-provider>\r\n        <AddEvent/>\r\n      </n-message-provider>\r\n      </div>\r\n      <n-list v-for=\"(action, index) in useSquareStore().squareStore\" :key='index'>\r\n        <n-card title=\"志愿活动\" hoverable class=\"mt-3 bg-slate-100 rounded-lg\" title-placement=\"left\">\r\n          <n-list-item>\r\n            <template #prefix>\r\n              <img :src=\"picture+action.name\" class=\"space-x-1 h-28 w-28\" alt=\"啥也没有\">\r\n            </template>\r\n            <template #suffix class=\"mt-9\">\r\n              <!--              参加活动-->\r\n              <div @click=\"join({index : index})\" v-if=\"useType().type.type === 'user'\">\r\n              <n-message-provider >\r\n                <JoinEvent/>\r\n              </n-message-provider>\r\n              </div>\r\n              <!--              修改活动-->\r\n<!--              <n-message-provider>-->\r\n<!--                <AlterEvent/>-->\r\n<!--              </n-message-provider>-->\r\n\r\n<!--              因为组件之间数据没有传成功，所以先放这-->\r\n              <!--              删除活动-->\r\n<!--              <n-message-provider>-->\r\n<!--                <DeleteEvent/>-->\r\n<!--              </n-message-provider>-->\r\n\r\n              <div v-if=\"useType().type.type === 'admit'\">\r\n              <n-button @click=\"remove({index : index})\" type=\"error\" class=\"mt-4\">\r\n                删除活动\r\n              </n-button>\r\n              </div>\r\n\r\n              <div>\r\n                <n-message-provider>\r\n                  <SignIn />\r\n                </n-message-provider>\r\n                <n-message-provider>\r\n                  <SignOut />\r\n                </n-message-provider>\r\n              </div>\r\n            </template>\r\n            <n-thing title=\"活动名称\">\r\n              {{ action.name }} <br>\r\n              活动时长：{{ action.time }}<br>\r\n              活动开始时间：{{ new Date(action.beginTime).toLocaleString() }} <br>\r\n              活动结束时间：{{ new Date(action.lateTime).toLocaleString() }} <br>\r\n              活动地点：{{ action.location }} <br>\r\n              最多{{ action.maxpeople }}个人 <br>\r\n<!--              {{ useSquareStore().squareStore }}-->\r\n            </n-thing>\r\n          </n-list-item>\r\n        </n-card>\r\n      </n-list>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport NavigationBar from \"~/pages/FunctionalArea/navigationBar.vue\";\r\nimport AddEvent from \"~/pages/Info/addEvent.vue\";\r\nimport JoinEvent from \"~/pages/Info/joinEvent.vue\";\r\nimport AlterEvent from \"~/pages/Info/alterEvent.vue\";\r\nimport DeleteEvent from \"~/pages/Info/deleteEvent.vue\";\r\nimport {useSquareStore} from \"~/stores/squareStore\";\r\nimport {storeToRefs} from \"pinia\";\r\nimport axios from \"axios\";\r\nimport api from \"~/api/api\";\r\nimport {useType} from \"~/stores/type\";\r\nimport {useSearchStore} from \"~/stores/searchStore\";\r\nimport SignIn from \"~/pages/Info/signIn.vue\";\r\nimport SignOut from \"~/pages/Info/signOut.vue\";\r\n\r\nconst picture = 'http://ru83u0iyp.hn-bkt.clouddn.com/'\r\n\r\nconst actions = ref([{\r\n  name: \"111\",\r\n  time: \"\",\r\n  beginTime: null,\r\n  lateTime: null,\r\n  location: \"\",\r\n  maxpeople: \"\",\r\n  id: \"\"\r\n}])\r\n\r\n\r\nactions.value = useSquareStore().squareStore\r\nconst deletedActions = ref([]);\r\n\r\nconst join = ({index}: { index: any }) => {\r\n  useSquareStore().action.actionId = actions.value[index].id;\r\n}\r\n\r\nfunction remove({index}: { index: any }){\r\n  const deletedAction = actions.value.splice(index, 1)[0];\r\n  // actions.value.splice(index,1)\r\n  // console.log(actions.value)\r\n  deletedActions.value.push(deletedAction);\r\n  console.log(deletedActions.value)\r\n  console.log(deletedAction.id)\r\n  axios.delete(api+'/Admin/deleteActivity',{\r\n    data:{\r\n      id : deletedAction.id\r\n    },\r\n    headers: {token: sessionStorage.getItem('token')}\r\n  }).then(response => {\r\n    console.log(response)\r\n    alert('删除成功')\r\n  }).catch(errors => {\r\n    console.log(errors)\r\n    alert('删除失败')\r\n  })\r\n}\r\n\r\nconst sigIn = (index: any) => {\r\n  useSquareStore().action.actionId = actions.value[index].id;\r\n}\r\n\r\nconst signOut = (index: any) => {\r\n  useSquareStore().action.actionId = actions.value[index].id;\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\nn-card {\r\n  max-width: 600px;\r\n}\r\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA,UAAA,UAAA;AAEA,UAAA,UAAA,IAAA,CAAA;AAAA,MAAqB,MAAA;AAAA,MACb,MAAA;AAAA,MACA,WAAA;AAAA,MACK,UAAA;AAAA,MACD,UAAA;AAAA,MACA,WAAA;AAAA,MACC,IAAA;AAAA,IACP,CAAA,CAAA;AAIN,YAAA,QAAA,eAAA,EAAA;AACA,UAAA,iBAAA,IAAA,CAAA,CAAA;AAEA,UAAA,OAAA,CAAA,EAAA,YAAA;AACE,qBAAA,EAAA,OAAA,WAAA,QAAA,MAAA,KAAA,EAAA;AAAA,IAAwD;AAG1D,aAAA,OAAA,EAAA,SAAA;AACE,YAAA,gBAAA,QAAA,MAAA,OAAA,OAAA,CAAA,EAAA,CAAA;AAGA,qBAAA,MAAA,KAAA,aAAA;AACA,cAAA,IAAA,eAAA,KAAA;AACA,cAAA,IAAA,cAAA,EAAA;AACA,YAAA,OAAA,MAAA,yBAAA;AAAA,QAAyC,MAAA;AAAA,UAClC,IAAA,cAAA;AAAA,QACgB;AAAA,QACrB,SAAA,EAAA,OAAA,eAAA,QAAA,OAAA,EAAA;AAAA,MACgD,CAAA,EAAA,KAAA,CAAA,aAAA;AAEhD,gBAAA,IAAA,QAAA;AACA,cAAA,MAAA;AAAA,MAAY,CAAA,EAAA,MAAA,CAAA,WAAA;AAEZ,gBAAA,IAAA,MAAA;AACA,cAAA,MAAA;AAAA,MAAY,CAAA;AAAA,IACb;AAGH,UAAA,QAAA,CAAA,UAAA;AACE,qBAAA,EAAA,OAAA,WAAA,QAAA,MAAA,KAAA,EAAA;AAAA,IAAwD;AAG1D,UAAA,UAAA,CAAA,UAAA;AACE,qBAAA,EAAA,OAAA,WAAA,QAAA,MAAA,KAAA,EAAA;AAAA,IAAwD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}