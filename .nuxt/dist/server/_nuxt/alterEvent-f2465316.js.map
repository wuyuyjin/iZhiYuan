{"version":3,"file":"alterEvent-f2465316.js","sources":["../../../../pages/Info/alterEvent.vue"],"sourcesContent":["<!--后端暂时没写-->\r\n<template>\r\n  <n-button @click=\"showModal = true\" type=\"info\" class=\"mt-4\">\r\n    修改活动\r\n  </n-button>\r\n  <n-modal\r\n      v-model:show=\"showModal\"\r\n      preset=\"dialog\"\r\n      title=\"确认\"\r\n      content=\"你确认?\"\r\n      positive-text=\"确认\"\r\n      negative-text=\"算了\"\r\n      @positive-click=\"submitCallback\"\r\n      @negative-click=\"cancelCallback\"\r\n  >\r\n    <n-card title=\"发布活动\">\r\n      <n-form\r\n          ref=\"formRef\"\r\n          :model=\"model.value\"\r\n          :rules=\"rules\"\r\n          label-placement=\"left\"\r\n          label-width=\"auto\"\r\n          require-mark-placement=\"right-hanging\"\r\n          :size=\"'medium'\"\r\n          :style=\"{\r\n      maxWidth: '640px'\r\n    }\"\r\n      >\r\n        <n-form-item label=\"活动名称\" path=\"name\">\r\n          <n-input :span=\"12\" v-model:value=\"model.name\" placeholder=\"输入活动名称\"/>\r\n        </n-form-item>\r\n        <n-form-item label=\"Input Number\" path=\"time\">\r\n          <n-input-number :span=\"12\" v-model:value=\"model.time\" placeholder=\"输入志愿时长\"/>\r\n        </n-form-item>\r\n        <n-form-item label=\"开始时间\" path=\"beginTime\">\r\n          <n-date-picker :span=\"12\" v-model:value=\"model.beginTime\" type=\"datetime\"/>\r\n        </n-form-item>\r\n        <n-form-item label=\"结束时间\" path=\"lateTime\">\r\n          <n-date-picker :span=\"12\" v-model:value=\"model.lateTime\" type=\"datetime\"/>\r\n        </n-form-item>\r\n        <n-form-item label=\"活动地点\" path=\"location\">\r\n          <n-input :span=\"12\" v-model:value=\"model.location\" placeholder=\"输入活动名称\"/>\r\n        </n-form-item>\r\n        <n-form-item label=\"最多参与人数\" path=\"maxpeople\">\r\n          <n-input :span=\"12\" v-model:value=\"model.maxpeople\" placeholder=\"输入活动名称\"/>\r\n        </n-form-item>\r\n      </n-form>\r\n    </n-card>\r\n  </n-modal>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport {ref} from 'vue'\r\nimport {FormInst, useMessage} from 'naive-ui'\r\nimport {useSquareStore} from \"~/stores/squareStore\";\r\nimport {storeToRefs} from \"pinia\";\r\nimport axios from \"axios\";\r\nimport api from \"~/api/api\";\r\n\r\n\r\n\r\n\r\nconst formRef = ref<FormInst | null>(null)\r\nconst model = ref({\r\n  name: '',\r\n  time: '',\r\n  beginTime: null,\r\n  lateTime: null,\r\n  location: '',\r\n  maxpeople: ''\r\n})\r\n\r\nconst rules = ref({\r\n  name: {\r\n    required: true,\r\n    trigger: ['blur', 'input'],\r\n    message: '请输入活动名称'\r\n  },\r\n  time: {\r\n    type: 'number',\r\n    required: true,\r\n    trigger: ['blur', 'input'],\r\n    message: '请输入志愿时长'\r\n  },\r\n  beginTime: {\r\n    type: 'number',\r\n    required: true,\r\n    trigger: ['blur', 'change'],\r\n    message: '请输入 datetimeValue'\r\n  },\r\n  lateTime: {\r\n    type: 'number',\r\n    required: true,\r\n    trigger: ['blur', 'change'],\r\n    message: '请输入 datetimeValue'\r\n  },\r\n  location: {\r\n    required: true,\r\n    trigger: ['blur', 'input'],\r\n    message: '请输入活动地点'\r\n  },\r\n  maxpeople: {\r\n    required: true,\r\n    trigger: ['blur', 'input'],\r\n    message: '请输入人数'\r\n  },\r\n})\r\n\r\nconst message = useMessage()\r\nconst showModal = ref(false)\r\n\r\nfunction submitCallback() {\r\n  const date1 = model.value.beginTime\r\n  const date2 = model.value.lateTime\r\n  const beginTime = new Date(date1)\r\n  const lateTime = new Date(date2)\r\n  console.log(JSON.stringify(beginTime.toLocaleString()))\r\n\r\n  const data = {\r\n    name: model.value.name,\r\n    time: model.value.time,\r\n    beginTime: beginTime.toLocaleString(),\r\n    lateTime: lateTime.toLocaleString(),\r\n    location: model.value.location,\r\n    maxpeople: model.value.maxpeople\r\n  }\r\n  axios.post(api+'/Admin/releaseActivity',data)\r\n      .then((response) => {\r\n        useSquareStore().squareStore = model.value\r\n        console.log(response.data)\r\n        message.success('发布成功')\r\n      })\r\n      .catch((errors) => {\r\n        console.log(errors)\r\n        message.error('发布失败')\r\n      })\r\n  // useSquareStore().squareStore = model.value\r\n  // message.success('成功')\r\n\r\n}\r\n\r\n\r\nfunction cancelCallback() {\r\n  message.warning('111111')\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA,UAAA,UAAA,IAAA,IAAA;AACA,UAAA,QAAA,IAAA;AAAA,MAAkB,MAAA;AAAA,MACV,MAAA;AAAA,MACA,WAAA;AAAA,MACK,UAAA;AAAA,MACD,UAAA;AAAA,MACA,WAAA;AAAA,IACC,CAAA;AAGb,UAAA,QAAA,IAAA;AAAA,MAAkB,MAAA;AAAA,QACV,UAAA;AAAA,QACM,SAAA,CAAA,QAAA,OAAA;AAAA,QACe,SAAA;AAAA,MAChB;AAAA,MACX,MAAA;AAAA,QACM,MAAA;AAAA,QACE,UAAA;AAAA,QACI,SAAA,CAAA,QAAA,OAAA;AAAA,QACe,SAAA;AAAA,MAChB;AAAA,MACX,WAAA;AAAA,QACW,MAAA;AAAA,QACH,UAAA;AAAA,QACI,SAAA,CAAA,QAAA,QAAA;AAAA,QACgB,SAAA;AAAA,MACjB;AAAA,MACX,UAAA;AAAA,QACU,MAAA;AAAA,QACF,UAAA;AAAA,QACI,SAAA,CAAA,QAAA,QAAA;AAAA,QACgB,SAAA;AAAA,MACjB;AAAA,MACX,UAAA;AAAA,QACU,UAAA;AAAA,QACE,SAAA,CAAA,QAAA,OAAA;AAAA,QACe,SAAA;AAAA,MAChB;AAAA,MACX,WAAA;AAAA,QACW,UAAA;AAAA,QACC,SAAA,CAAA,QAAA,OAAA;AAAA,QACe,SAAA;AAAA,MAChB;AAAA,IACX,CAAA;AAGF,UAAA,UAAA;AACA,UAAA,YAAA,IAAA,KAAA;AAEA,aAAA,iBAAA;AACE,YAAA,QAAA,MAAA,MAAA;AACA,YAAA,QAAA,MAAA,MAAA;AACA,YAAA,YAAA,IAAA,KAAA,KAAA;AACA,YAAA,WAAA,IAAA,KAAA,KAAA;AACA,cAAA,IAAA,KAAA,UAAA,UAAA,eAAA,CAAA,CAAA;AAEA,YAAA,OAAA;AAAA,QAAa,MAAA,MAAA,MAAA;AAAA,QACO,MAAA,MAAA,MAAA;AAAA,QACA,WAAA,UAAA,eAAA;AAAA,QACkB,UAAA,SAAA,eAAA;AAAA,QACF,UAAA,MAAA,MAAA;AAAA,QACZ,WAAA,MAAA,MAAA;AAAA,MACC;AAEzB,YAAA,KAAA,MAAA,0BAAA,IAAA,EAAA,KAAA,CAAA,aAAA;AAEM,yBAAA,cAAA,MAAA;AACA,gBAAA,IAAA,SAAA,IAAA;AACA,gBAAA,QAAA,MAAA;AAAA,MAAsB,CAAA,EAAA,MAAA,CAAA,WAAA;AAGtB,gBAAA,IAAA,MAAA;AACA,gBAAA,MAAA,MAAA;AAAA,MAAoB,CAAA;AAAA,IACrB;AAOP,aAAA,iBAAA;AACE,cAAA,QAAA,QAAA;AAAA,IAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}